apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Enterprise Gateway for Jupyter Notebooks
# Installation: Helm chart from jupyter/enterprise-gateway or Kustomize
#
# To install with Helm:
#   helm repo add jupyter https://jupyter-server.github.io/enterprise_gateway/
#   helm repo update
#   helm install enterprise-gateway jupyter/enterprise-gateway \
#       --namespace enterprise-gateway \
#       --create-namespace \
#       -f base/values.yaml
#
# To install with Kustomize:
#   kubectl apply -k .

namespace: enterprise-gateway

resources:
  - namespace.yaml
  - base/serviceaccount.yaml
  - base/clusterrole.yaml
  - base/clusterrolebinding.yaml
  - base/service.yaml
  - overlays/pvc/kernel-specs-pvc.yaml
  - overlays/configmap/tf-gpu-4GB.yaml
  - overlays/configmap/tf-gpu-8GB.yaml
  - overlays/configmap/pytorch-gpu-4GB.yaml
  - overlays/configmap/pytorch-gpu-8GB.yaml
  - overlays/configmap/gpu-enforce-limit.yaml
  - overlays/migration-job/init-kernels.yaml
  - overlays/deployment/enterprise-gateway.yaml
  - overlays/kyverno/inject-jeg-env.yaml

configMapGenerator:
  - name: enterprise-gateway-helm-values
    files:
      - base/values.yaml

labels:
  - pairs:
      app.kubernetes.io/name: enterprise-gateway
      app.kubernetes.io/part-of: kubeflow
      app.kubernetes.io/component: enterprise-gateway
    includeSelectors: false

